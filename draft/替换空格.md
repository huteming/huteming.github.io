---
title: 替换空格
summary: 每日算法之替换空格
date: 2020-05-08
---

## 题目描述

请实现一个函数，把字符串 s 中的每个空格替换成"%20"。
 

### 示例

示例 1：

```js
输入：s = "We are happy."
输出："We%20are%20happy."
```

## 题解

### 代码实现

```js
function replaceSpace (s) {
  if (!s) {
    return ''
  }
  let emptyNum = 0
  let stringNum = 0
  for (let i = 0; i < s.length; i++) {
    if (s[i] === ' ') {
      emptyNum++
    } else {
      stringNum++
    }
  }
  const arr = new Array(emptyNum * 3 + stringNum)
  let point = 0
  for (let i = 0; i < s.length; i++) {
    if (s[i] === ' ') {
      arr[point++] = '%'
      arr[point++] = '2'
      arr[point++] = '0'
    } else {
      arr[point++] = s[i]
    }
  }
  return arr.join('')
}
```

### 代码说明

上面这段js代码看起来有点是为了算法而算法了，毕竟在js里，就算不用replace等方法，最多也只需要另外创建一个字符串做拼接就好了，比如这样

```js
function replaceSpace (s) {
  let result = ''
  for (let i = 0; i < s.length; i++) {
    let temp = s[i]
    if (temp === ' ') {
        temp = '%20'
    }
    result += temp
  }
  return result
}
```

为什么要像上面那样"复杂"呢？这里个人有几个猜测，**以下纯属瞎猜，如有雷同，概不负责**：

1. 在其他语言中，比如 Python 和 Java 等语言中，字符串都被设计成不可变的类型，即无法直接修改字符串的某一位字符，需要新建一个字符串实现。如果像说明代码那样做字符串的拼接，会产生太多的中间变量，导致空间复杂度太大

2. js里另外一个特殊的地方在于，js里的数组是可以动态新增项的，在声明数组时指定长度也不会获得太大的性能提升，所以一般也不会这么做。但其他语言里比如Java，在声明时指定数组长度能获得很大的性能提升。

**综上两点，求解该方法时，就需要用数组做中间变量，而且需要知道声明数组的长度。**

另外，虽然能直接指定数组长度是 s.length * 3（假设最坏的情况：字符串都是空格），但这样会浪费较大空间，所以先做一次遍历计算出数组需要的最小长度。

多一次遍历理论上确实会让时间复杂度变为 2O(n)，但一般我们在说时间复杂度的时候是忽略常量系数的，所以以上解法我们认为时间复杂度还是 O(n)。

---
title: 排序数组查找
summary: 每日算法之排序数组查找
date: 2020-05-02
---

## 题目描述

统计一个数组在排序数组中出现的次数

### 示例

```js
input:  nums = [5, 7, 7, 8, 8, 10, 10], target = 8
output: 2
```

## 遍历查找

### 过程描述

直接遍历数组，判断前后的值是否相同，找到元素开始位置和结束位置，时间复杂度 O(n)

### 代码实现

```js
function search (nums, target) {
  let count = 0
  for (let i = 0; i < nums.length; i++) {
    const num = nums[i]
    if (num > target) {
      return count
    }
    if (num === target) {
      count++
    }
  }
  return count
}
```

## 二分法查找

### 过程描述

使用二分法分别找到元素开始位置和结束位置，时间复杂度 O(logn)

### 代码实现

```js
function search (nums, target) {
  const first = findFirst(nums, target, 0, nums.length - 1)
  const last = findLast(nums, target, 0, nums.length - 1)
  if (first !== -1 && last !== -1) {
    return last - first + 1
  }
  return 0
}

function findFirst (array, target, start, end) {
  if (start > end) {
    return -1
  }
  const index = Math.floor((start + end) / 2)
  const num = array[index]
  if (num > target) {
    return findFirst(array, target, start, index - 1)
  }
  if (num < target) {
    return findFirst(array, target, index + 1, end)
  }
  if (array[index - 1] === num) {
    return findFirst(array, target, start, index - 1)
  }
  return index
}

function findLast (array, target, start, end) {
  if (start > end) {
    return -1
  }
  const index = Math.floor((start + end) / 2)
  const num = array[index]
  if (num > target) {
    return findLast(array, target, start, index - 1)
  }
  if (num < target) {
    return findLast(array, target, index + 1, end)
  }
  if (array[index + 1] === num) {
    return findLast(array, target, index + 1, end)
  }
  return index
}
```

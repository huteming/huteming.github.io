<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">css加载会造成阻塞吗 | 特_明</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://huteming.github.io/blog/css加载会造成阻塞吗"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="css加载会造成阻塞吗 | 特_明"><meta data-rh="true" name="description" content="总所周知，JS 执行会阻塞 DOM 树的解析和渲染。"><meta data-rh="true" property="og:description" content="总所周知，JS 执行会阻塞 DOM 树的解析和渲染。"><meta data-rh="true" property="og:image" content="https://res.cloudinary.com/daily-now/image/upload/f_auto,q_auto/v1/posts/71983382ced819139f6611fff4d4231a?_a=AQAEufR"><meta data-rh="true" name="twitter:image" content="https://res.cloudinary.com/daily-now/image/upload/f_auto,q_auto/v1/posts/71983382ced819139f6611fff4d4231a?_a=AQAEufR"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-01-25T05:46:36.000Z"><meta data-rh="true" property="article:tag" content="css,性能优化"><link data-rh="true" rel="icon" href="/img/site/logo/favicon.ico"><link data-rh="true" rel="canonical" href="https://huteming.github.io/blog/css加载会造成阻塞吗"><link data-rh="true" rel="alternate" href="https://huteming.github.io/blog/css加载会造成阻塞吗" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://huteming.github.io/blog/css加载会造成阻塞吗" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="特_明 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="特_明 Atom Feed">

<script src="https://kit.fontawesome.com/3e34564138.js" async></script><link rel="stylesheet" href="/assets/css/styles.7dfa28cd.css">
<script src="/assets/js/runtime~main.466ba716.js" defer="defer"></script>
<script src="/assets/js/main.f2567d10.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_BZfF" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/site/logo/logo.png" alt="Logo" class="themedComponent_kqul themedComponent--light_oF2u"><img src="/site/logo/logo.png" alt="Logo" class="themedComponent_kqul themedComponent--dark_b08C"></div><b class="navbar__title text--truncate">特_明</b></a><a class="navbar__item navbar__link" href="/docs/js/CommonJS和ES模块差异">Docs<!-- --></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_a7wF"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_XMyw"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_AtK9 thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_gwnN margin-bottom--md">Recent posts</div><ul class="sidebarItemList_mD5W clean-list"><li class="sidebarItem_Kung"><a class="sidebarItemLink_X6fD" href="/blog/为什么有微任务">为什么有微任务</a></li><li class="sidebarItem_Kung"><a class="sidebarItemLink_X6fD" href="/blog/CAS">CAS</a></li><li class="sidebarItem_Kung"><a class="sidebarItemLink_X6fD" href="/blog/删除commit">删除commit</a></li><li class="sidebarItem_Kung"><a class="sidebarItemLink_X6fD" href="/blog/文本换行">文本换行</a></li><li class="sidebarItem_Kung"><a class="sidebarItemLink_X6fD" href="/blog/为什么需要 refresh token">为什么需要 refresh token</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="总所周知，JS 执行会阻塞 DOM 树的解析和渲染。"><link itemprop="image" href="https://res.cloudinary.com/daily-now/image/upload/f_auto,q_auto/v1/posts/71983382ced819139f6611fff4d4231a?_a=AQAEufR"><header><h1 class="title_Sau3" itemprop="headline">css加载会造成阻塞吗</h1><div class="container_h9vP margin-vert--md"><time datetime="2024-01-25T05:46:36.000Z" itemprop="datePublished">2024年1月25日</time> · <!-- -->阅读需 8 分钟<!-- --></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>总所周知，JS 执行会阻塞 DOM 树的解析和渲染。</p>
<!-- --><p>那么 css 加载会阻塞 DOM 树的解析和渲染吗？</p>
<!-- --><p>为了完成本次测试，首先需要限制 chrome 的下载速度，如图：</p>
<!-- --><p><img loading="lazy" alt="network" src="/assets/images/network-aa79fd7f4f714336c6c0f6e07ba78a3f.png" width="3070" height="242" class="img_XlwT"></p>
<!-- --><p>选择预设值或者是自己新增一个自己想要的网速都行，只要测试时网速<!-- --><strong>够慢</strong>！<!-- --></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="css-加载会阻塞-dom-树的解析渲染吗">css 加载会阻塞 DOM 树的解析渲染吗？<!-- --><a href="#css-加载会阻塞-dom-树的解析渲染吗" class="hash-link" aria-label="css 加载会阻塞 DOM 树的解析渲染吗？的直接链接" title="css 加载会阻塞 DOM 树的解析渲染吗？的直接链接">​</a></h2>
<!-- --><p>测试代码：</p>
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">css阻塞</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">      </span><span class="token style language-css selector" style="color:#00009f">h1</span><span class="token style language-css"> </span><span class="token style language-css punctuation" style="color:#393A34">{</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">        </span><span class="token style language-css property" style="color:#36acaa">color</span><span class="token style language-css punctuation" style="color:#393A34">:</span><span class="token style language-css"> </span><span class="token style language-css color">red</span><span class="token style language-css"> </span><span class="token style language-css important">!important</span><span class="token style language-css punctuation" style="color:#393A34">;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">      </span><span class="token style language-css punctuation" style="color:#393A34">}</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:#00009f">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:#d73a49">h</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">querySelectorAll</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;h1&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript function" style="color:#d73a49">setTimeout</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript">h</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:#36acaa">0</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">这是红色的</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>假设： css 加载会阻塞 DOM 树解析和渲染</p>
<!-- --><p>假设结果: 在 bootstrap.css 还没加载完之前，下面的内容不会被解析渲染，那么我们一开始看到的应该是白屏，h1 不会显示出来。并且此时 console.log 的结果应该是一个空数组。</p>
<!-- --><p>实际结果:如下图</p>
<!-- --><p><img loading="lazy" src="/assets/images/block-render-17c82657a48111614268fcabca29a88c.gif" width="1920" height="985" class="img_XlwT"></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="css-会阻塞-dom-树解析">css 会阻塞 DOM 树解析？<!-- --><a href="#css-会阻塞-dom-树解析" class="hash-link" aria-label="css 会阻塞 DOM 树解析？的直接链接" title="css 会阻塞 DOM 树解析？的直接链接">​</a></h3>
<!-- --><p>由上图我们可以看到，当 css 还没加载完成的时候，h1 并没有显示，但是此时控制台输出如下</p>
<!-- --><p><img loading="lazy" src="data:image/png;base64,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" width="635" height="72" class="img_XlwT"></p>
<!-- --><p>可以得知，此时 DOM 树至少已经解析完成到了 h1 那里，而此时 css 还没加载完成，也就说明，<!-- --><strong>css 并不会阻塞 DOM 树的解析</strong>。<!-- --></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="css-加载会阻塞-dom-树渲染">css 加载会阻塞 DOM 树渲染？<!-- --><a href="#css-加载会阻塞-dom-树渲染" class="hash-link" aria-label="css 加载会阻塞 DOM 树渲染？的直接链接" title="css 加载会阻塞 DOM 树渲染？的直接链接">​</a></h3>
<!-- --><p>由上图，我们也可以看到，当 css 还没加载出来的时候，页面显示白屏，直到 css 加载完成之后，红色字体才显示出来，也就是说，下面的内容虽然解析了，但是并没有被渲染出来。所以，<!-- --><strong>css 加载会阻塞 DOM 树渲染</strong>。<!-- --></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="css-加载会阻塞-js-运行吗">css 加载会阻塞 JS 运行吗？<!-- --><a href="#css-加载会阻塞-js-运行吗" class="hash-link" aria-label="css 加载会阻塞 JS 运行吗？的直接链接" title="css 加载会阻塞 JS 运行吗？的直接链接">​</a></h2>
<!-- --><p>​css 加载会不会阻塞 JS 执行呢?</p>
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">css阻塞</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;before css&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> startDate </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name">Date</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">这是红色的</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> endDate </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name">Date</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;after css&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;经过了&#x27;</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">+</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript">endDate </span><span class="token script language-javascript operator" style="color:#393A34">-</span><span class="token script language-javascript"> startDate</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">+</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">&#x27;ms&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>假设: css 加载会阻塞后面的 JS 运行</p>
<!-- --><p>预期结果: 在 link 后面的 JS 代码，应该要在 css 加载完成后才会运行</p>
<!-- --><p>实际结果:</p>
<!-- --><p><img loading="lazy" src="/assets/images/block-js-1838e979e727c69ef4801f11958df61e.gif" width="1920" height="985" class="img_XlwT"></p>
<!-- --><p>由上图我们可以看出，位于 css 加载语句前的那个 JS 代码先执行了，但是位于 css 加载语句后面的代码迟迟没有执行，直到 css 加载完成后，它才执行。这也就说明了，<!-- --><strong>css 加载会阻塞后面的 JS 语句的执行</strong>。<!-- --></p>
<!-- --><p>详细结果看下图(css 加载用了 5600+ms):</p>
<!-- --><p><img loading="lazy" src="data:image/png;base64,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" width="705" height="152" class="img_XlwT"></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="domcontentloaded">DOMContentLoaded<!-- --><a href="#domcontentloaded" class="hash-link" aria-label="DOMContentLoaded的直接链接" title="DOMContentLoaded的直接链接">​</a></h2>
<!-- --><p>对于浏览器来说，页面加载主要有两个事件，一个是 DOMContentLoaded，另一个是 onLoad。而 onLoad 没什么好说的，就是等待页面的所有资源都加载完成才会触发，这些资源包括 css、js、图片视频等。</p>
<!-- --><p>而 DOMContentLoaded，顾名思义，就是当页面的内容解析完成后，则触发该事件。那么，正如我们上面讨论过的，css 会阻塞 DOM 渲染和 JS 执行，而 JS 会阻塞 DOM 解析。那么我们可以做出这样的假设</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>当页面只存在 css，或者 JS 都在 css 前面，那么 DomContentLoaded 不需要等到 css 加载完毕。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>当页面里同时存在 css 和 js，并且 JS 在 css 后面的时候，DomContentLoaded 必须等到 css 和 JS 都加载完毕才触发。</p>
<!-- --></li>
<!-- --></ol>
<!-- --><p>我们先对第一种情况做测试：</p>
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">css阻塞</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">addEventListener</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;DOMContentLoaded&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;DOMContentLoaded&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>复制代码实验结果如下图：</p>
<!-- --><p><img loading="lazy" src="/assets/images/block-loaded-b942ea472ef037bfedd242467a9b368d.gif" width="600" height="337" class="img_XlwT"></p>
<!-- --><p>从动图我们可以看出来，<!-- --><strong>css 还未加载完，就已经触发了 DOMContentLoaded 事件了</strong>。因为 css 后面没有任何 JS 代码。<!-- --></p>
<!-- --><p>接下来我们对第二种情况做测试，很简单，就在 css 后面加一行代码就行了</p>
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">css阻塞</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">addEventListener</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;DOMContentLoaded&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;DOMContentLoaded&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;到我了没&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>复制代码实验结果如下图：</p>
<!-- --><p><img loading="lazy" src="/assets/images/block-loaded-css+js-cb85dda64df9dbea6162a54a6ca7107d.gif" width="599" height="344" class="img_XlwT"></p>
<!-- --><p>我们可以看到，<!-- --><strong>只有在 css 加载完成后，才会触发 DOMContentLoaded 事件</strong>。<!-- --></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="结论">结论<!-- --><a href="#结论" class="hash-link" aria-label="结论的直接链接" title="结论的直接链接">​</a></h2>
<!-- --><p>由上所述，我们可以得出以下结论:</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>css 加载不会阻塞 DOM 树的解析</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>css 加载会阻塞 DOM 树的渲染</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>css 加载会阻塞后面 JS 语句的执行</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>当页面只存在 css，或者 JS 都在 css 前面，那么 DomContentLoaded 不需要等到 css 加载完毕。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>当页面里同时存在 css 和 JS, 并且 JS 在 css 后面的时候，DomContentLoaded 必须等到 css 和 JS 都加载完毕才触发。</p>
<!-- --></li>
<!-- --></ol>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="原理解析">原理解析<!-- --><a href="#原理解析" class="hash-link" aria-label="原理解析的直接链接" title="原理解析的直接链接">​</a></h2>
<!-- --><p><strong>webkit 渲染过程</strong></p>
<!-- --><p><img loading="lazy" src="/assets/images/render-process-42fa211811a883ba8db8e143c620c382.png" width="624" height="289" class="img_XlwT"></p>
<!-- --><p>从上面两个流程图我们可以看出来，浏览器渲染的流程如下：</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>HTML 解析文件，生成 DOM Tree，解析 CSS 文件生成 CSSOM Tree</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>将 DOM Tree 和 CSSOM Tree 结合，生成 Render Tree(渲染树)</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>根据 Render Tree 渲染绘制，将像素渲染到屏幕上。</p>
<!-- --></li>
<!-- --></ol>
<!-- --><p>从流程我们可以看出来</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>DOM 解析和 CSS 解析是两个并行的进程，所以这也解释了为什么 CSS 加载不会阻塞 DOM 的解析。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>然而，由于 Render Tree 是依赖于 DOM Tree 和 CSSOM Tree 的，所以他必须等待到 CSSOM Tree 构建完成，也就是 CSS 资源加载完成(或者 CSS 资源加载失败)后，才能开始渲染。因此，CSS 加载是会阻塞 DOM 的渲染的。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>由于 JS 可能会操作之前的 DOM 节点和 css 样式，因此浏览器会维持 html 中 css 和 JS 的顺序。因此，样式表会在后面的 JS 执行前先加载执行完毕。所以 css 会阻塞后面 JS 的执行。</p>
<!-- --></li>
<!-- --></ol></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_oEqs"><div class="col"><b>标签：<!-- --></b><ul class="tags_QbGF padding--none margin-left--sm"><li class="tag__b4G"><a class="tag_iUSP tagRegular_vF5G" href="/blog/tags/css">css<!-- --></a></li><li class="tag__b4G"><a class="tag_iUSP tagRegular_vF5G" href="/blog/tags/性能优化">性能优化<!-- --></a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/为什么需要 refresh token"><div class="pagination-nav__sublabel">较新一篇<!-- --></div><div class="pagination-nav__label">为什么需要 refresh token</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/prettier 与 eslint 的集成"><div class="pagination-nav__sublabel">较旧一篇<!-- --></div><div class="pagination-nav__label">prettier 与 eslint 的集成</div></a></nav></main><div class="col col--2"><div class="tableOfContents_DnSb thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#css-加载会阻塞-dom-树的解析渲染吗" class="table-of-contents__link toc-highlight">css 加载会阻塞 DOM 树的解析渲染吗？</a><ul><li><a href="#css-会阻塞-dom-树解析" class="table-of-contents__link toc-highlight">css 会阻塞 DOM 树解析？</a></li><li><a href="#css-加载会阻塞-dom-树渲染" class="table-of-contents__link toc-highlight">css 加载会阻塞 DOM 树渲染？</a></li></ul></li><li><a href="#css-加载会阻塞-js-运行吗" class="table-of-contents__link toc-highlight">css 加载会阻塞 JS 运行吗？</a></li><li><a href="#domcontentloaded" class="table-of-contents__link toc-highlight">DOMContentLoaded</a></li><li><a href="#结论" class="table-of-contents__link toc-highlight">结论</a></li><li><a href="#原理解析" class="table-of-contents__link toc-highlight">原理解析</a></li></ul></div></div></div></div></div></div>
</body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>特_明 Blog</title>
        <link>https://huteming.github.io/blog</link>
        <description>特_明 Blog</description>
        <lastBuildDate>Mon, 05 Feb 2024 02:47:44 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-Hans</language>
        <item>
            <title><![CDATA[node监听模式]]></title>
            <link>https://huteming.github.io/blog/node监听模式</link>
            <guid>https://huteming.github.io/blog/node监听模式</guid>
            <pubDate>Mon, 05 Feb 2024 02:47:44 GMT</pubDate>
            <description><![CDATA[在 nodejs 中实现监听模式的几种方案]]></description>
            <content:encoded><![CDATA[<p>在 nodejs 中实现监听模式的几种方案</p>
<!-- --><p>nodejs 在 <!-- --><a href="https://nodejs.org/en/blog/release/v18.11.0/" target="_blank" rel="noopener noreferrer">v18.11.0</a> 新增了 <!-- --><code>--watch</code> 模式。<!-- --></p>
<!-- --><p><strong>注意这只是试验性质的</strong></p>
<!-- --><div class="language-bash codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-bash codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token plain">nvm use v18.11.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node --watch main.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (node:36224) ExperimentalWarning: Watch mode is an experimental feature.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  This feature could change at any time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (Use `node --trace-warnings ...` to show where the warning was created)</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>其他开启监听模式的方法</p>
<!-- --><ul>
<!-- --><li>
<!-- --><p><a href="https://nodemon.io/" target="_blank" rel="noopener noreferrer">nodemon</a> for development<!-- --></p>
<!-- --></li>
<!-- --><li>
<!-- --><p><a href="https://pm2.keymetrics.io/" target="_blank" rel="noopener noreferrer">pm2</a> for production<!-- --></p>
<!-- --></li>
<!-- --></ul>]]></content:encoded>
            <category>nodejs</category>
        </item>
        <item>
            <title><![CDATA[父元素宽度自适应子元素宽度]]></title>
            <link>https://huteming.github.io/blog/父元素宽度自适应子元素宽度</link>
            <guid>https://huteming.github.io/blog/父元素宽度自适应子元素宽度</guid>
            <pubDate>Mon, 05 Feb 2024 02:35:22 GMT</pubDate>
            <description><![CDATA[默认情况下，一个 div 元素的宽度是父容器内容的 100%，哪怕这个 div 的子元素的宽度超出了。]]></description>
            <content:encoded><![CDATA[<p>默认情况下，一个 div 元素的宽度是父容器内容的 100%，哪怕这个 div 的子元素的宽度超出了。</p>
<!-- --><p>可以看到下面这个示例，container 的背景色并不是和内容等宽的。</p>
<!-- --><div class="playgroundContainer_GTBP"><div class="playgroundHeader_NL4N">实时编辑器<!-- --></div><div class="playgroundEditor_jQvL"><pre class="prism-code language-tsx" style="margin:0;outline:none;padding:10px;font-family:inherit;color:#393A34;background-color:#f6f8fa" spellcheck="false"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Scrollable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> styleScrollable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'100px'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    backgroundColor</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'antiquewhite'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    overflow</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'auto'</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34">
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> styleContainer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// width: 'max-content',</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'50px'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    display</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'flex'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    alignItems</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'center'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    backgroundColor</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'lightblue'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    gap</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'20px'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34">
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> styleItem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    flexGrow</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    flexShrink</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'0'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// flexBasis: '200px',</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    width</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'200px'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    backgroundColor</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'cadetblue'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34">
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">scrollable</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styleScrollable</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">scrollable</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34">
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">container</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styleContainer</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styleItem</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">item</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styleItem</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">item</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styleItem</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">item</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styleItem</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">item</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styleItem</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">item</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">styleItem</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">item</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span>
<!-- --></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span>
<!-- --></span></pre></div><div class="playgroundHeader_NL4N">结果<!-- --></div><div class="playgroundPreview_fqGx"><div>Loading...</div></div></div>
<!-- --><p>要解决这个问题，可以给 container 一个显示的宽度。比如 <!-- --><code>width: max-content</code></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="flex-basic">flex basic<!-- --><a href="https://huteming.github.io/blog/%E7%88%B6%E5%85%83%E7%B4%A0%E5%AE%BD%E5%BA%A6%E8%87%AA%E9%80%82%E5%BA%94%E5%AD%90%E5%85%83%E7%B4%A0%E5%AE%BD%E5%BA%A6#flex-basic" class="hash-link" aria-label="flex basic的直接链接" title="flex basic的直接链接">​</a></h2>
<!-- --><p><strong>但是这里有个特别需要注意的</strong></p>
<!-- --><p>如果子元素是通过 flex 布局的 flex-basis 计算宽度撑宽的，那这里的 width 又会出现问题。</p>
<!-- --><p>所以，务必要给容器元素和子元素都加上 <!-- --><code>width</code> 属性。<!-- --></p>]]></content:encoded>
            <category>css</category>
        </item>
        <item>
            <title><![CDATA[什么时候使用 unknown 和 never]]></title>
            <link>https://huteming.github.io/blog/什么时候使用 unknown 和 never</link>
            <guid>https://huteming.github.io/blog/什么时候使用 unknown 和 never</guid>
            <pubDate>Mon, 05 Feb 2024 02:33:47 GMT</pubDate>
            <description><![CDATA[unknown 是所有可能值的集合。任何值都可以分配给 unknown 类型的变量。这意味着 unknown 是所有其他类型的超类型。因此， unknown 被称为顶级类型]]></description>
            <content:encoded><![CDATA[<p><strong>unknown 是所有可能值的集合</strong>。任何值都可以分配给 unknown 类型的变量。这意味着 unknown 是所有其他类型的超类型。因此， unknown 被称为顶级类型<!-- --></p>
<!-- --><p><strong>never 是空集</strong>。没有值可以分配给 never 类型的变量。事实上，将值类型解析为 never 是一个错误，因为这会产生矛盾。空集可以放入任何其他集合中，因此 never 是所有其他类型的子类型。这就是为什么 never 被称为底部类型<!-- --></p>
<!-- --><p><img loading="lazy" alt="unknown+never" src="https://huteming.github.io/assets/images/unknown+never-0d11dc4e638165a4a59f70c2a1f79f34.avif" width="730" height="536" class="img_XlwT"></p>
<!-- --><p>对于任何类型的 T</p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token builtin">never</span><span class="token plain"> ⇒ </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token builtin">unknown</span><span class="token plain"> ⇒ </span><span class="token constant" style="color:#36acaa">T</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="never-类型">never 类型<!-- --><a href="https://huteming.github.io/blog/%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%20unknown%20%E5%92%8C%20never#never-%E7%B1%BB%E5%9E%8B" class="hash-link" aria-label="never 类型的直接链接" title="never 类型的直接链接">​</a></h2>
<!-- --><p>利用值类型解析为 never 是一个错误，可以用来裁剪或者说缩小类型范围</p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// timeout 永远不会调用 resolve</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">timeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ms</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">never</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name builtin">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Timeout elapsed'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchPriceWithTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tickerSymbol</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> stock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">race</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">fetchStock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tickerSymbol</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// returns `Promise&lt;{ price: number }&gt;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">timeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> stock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>Promise.race 签名的工作方式如下</p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">race</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name constant" style="color:#36acaa">A</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name constant" style="color:#36acaa">B</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">inputs</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">A</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">B</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">A</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">B</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>就上面这段代码，将 fetchStock 与 timeout 组合在一起，因此输入 Promise 解析类型为 <!-- --><code>{ price: number } 和 never</code>，<!-- --></p>
<!-- --><p>输出的解析类型 stock 的类型应为 <!-- --><code>{ price: number } | never</code> 。<!-- --></p>
<!-- --><p>因为 never 是联合的标识，所以该类型简化为 <!-- --><code>{ price: number }</code></p>
<!-- --><p>如果我们使用 any ，我们就会失去类型检查的好处，因为 <!-- --><code> { price: number } | any</code> 相当于 any<!-- --></p>
<!-- --><p>如果我们使用 unknown ，那么 stock 的类型将是 <!-- --><code>{ price: number } | unknown</code> ，它简化为 unknown<!-- --></p>
<!-- --><p><strong>使用 never 来修剪不需要的情况</strong></p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 它从联合类型中删除了 null 和 undefined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">NonNullable</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">T</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">undefined</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token builtin">never</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="unknown-类型">unknown 类型<!-- --><a href="https://huteming.github.io/blog/%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%20unknown%20%E5%92%8C%20never#unknown-%E7%B1%BB%E5%9E%8B" class="hash-link" aria-label="unknown 类型的直接链接" title="unknown 类型的直接链接">​</a></h2>
<!-- --><p>任何值都可以分配给 unknown 类型的变量。因此，当值可能具有任何类型，或者不方便使用更具体的类型时，请使用 unknown</p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">prettyPrint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">unknown</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">Array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'['</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prettyPrint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">', '</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">']'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'string'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">"</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">x</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">"</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'number'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'etc.'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>在 TypeScript 3.0 之前，编写 prettyPrint 的最佳方法是使用 any 作为 x 的类型。类型缩小对 any 的作用与对 unknown 的作用基本相同；</p>
<!-- --><p>但是，如果我们犯了一个错误，<!-- --><strong>有时候认为类型已经缩小，但实际上并没有缩小</strong>，那么使用 unknown 可以拯救我们：<!-- --></p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">prettyPrint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// whoops - this `isArray` is not a type guard!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'['</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">mop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prettyPrint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">', '</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">']'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* snip */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'etc.'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>因为 isArray 不是类型保护，并且我们使用 any 作为 x 的类型，所以 x 的类型仍然是 any 在 if 正文中。因此，编译器不会捕获此版本 prettyPrint 中的拼写错误。如果 x 的类型是 unknown ，我们会得到这个错误： <!-- --><code>Object is of type ‘unknown’.</code></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="参考">参考<!-- --><a href="https://huteming.github.io/blog/%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8%20unknown%20%E5%92%8C%20never#%E5%8F%82%E8%80%83" class="hash-link" aria-label="参考的直接链接" title="参考的直接链接">​</a></h2>
<!-- --><p><a href="https://blog.logrocket.com/when-to-use-never-unknown-typescript/" target="_blank" rel="noopener noreferrer">When to use never and unknown in TypeScript</a></p>]]></content:encoded>
            <category>ts</category>
        </item>
        <item>
            <title><![CDATA[为什么有微任务]]></title>
            <link>https://huteming.github.io/blog/为什么有微任务</link>
            <guid>https://huteming.github.io/blog/为什么有微任务</guid>
            <pubDate>Sun, 28 Jan 2024 14:27:22 GMT</pubDate>
            <description><![CDATA[需要明确的是，微任务不是因为 Promise 才出现的。]]></description>
            <content:encoded><![CDATA[<p>需要明确的是，<!-- --><strong>微任务不是因为 Promise 才出现的</strong>。<!-- --></p>
<!-- --><p>微任务出现的原因，可以看这个 <!-- --><a href="https://www.youtube.com/watch?v=cCOL7MC4Pl0&amp;t=1447s" target="_blank" rel="noopener noreferrer">youtube 上的视频</a>。<!-- --></p>
<!-- --><p>简单来说就是: <!-- --><strong>微任务是为了监听 dom, 而作为 <!-- --><code>MutationObserver</code> 的实现出现的。<!-- --></strong></p>
<!-- --><p>为什么 <!-- --><code>MutationObserver</code> 用微任务实现？<!-- --></p>
<!-- --><p>考虑这么一段代码</p>
<!-- --><div class="language-js codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-js codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// 因为冒泡特性，回调事件会成倍的触发</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'DOMNodeInserted'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'inserted'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> span </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'span'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">span</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  span</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">textContent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'hello'</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 这里会导致二次触发回调事件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>如果使用 <!-- --><code>addEventListener</code> 来监听，因为事件冒泡的特性，回调函数很有可能会因为一段很小的副作用而成本的触发。<!-- --></p>
<!-- --><p>实际上想要的监听是类似于现在 Vue 和 React 做的优化，批量更新，</p>
<!-- --><p>就是希望浏览器不是马上执行回调函数，而是"等一会"再执行一次就够了。当然，这里等一会还是希望在浏览器渲染之前的。</p>
<!-- --><p>所以才有了微任务！</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="1-微任务-和-promise-的关系是什么">1. <!-- --><code>微任务</code> 和 <!-- --><code>Promise</code> 的关系是什么？<!-- --><a href="https://huteming.github.io/blog/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89%E5%BE%AE%E4%BB%BB%E5%8A%A1#1-%E5%BE%AE%E4%BB%BB%E5%8A%A1-%E5%92%8C-promise-%E7%9A%84%E5%85%B3%E7%B3%BB%E6%98%AF%E4%BB%80%E4%B9%88" class="hash-link" aria-label="1-微任务-和-promise-的关系是什么的直接链接" title="1-微任务-和-promise-的关系是什么的直接链接">​</a></h2>
<!-- --><p>最早 <!-- --><code>Promise</code> 是社区开发者自己实现的，然后出现了 Promise/A+ 标准，并规定了一系列 API，并配有大量的测试用例，<!-- --></p>
<!-- --><p>后来 Promise 库的开发人员为了尽可能快的执行 Promise 回调事件，并找到了在微任务队列中实现的办法，</p>
<!-- --><p>有人提交过建议在 ECMAScript 规范中提高 Promise 的执行优先级，但被拒绝了，</p>
<!-- --><p>是后来 html5 规范指定 Promise 是进入微任务队列，</p>
<!-- --><p>最终，指定微任务队列的决定是由杰出的开发人员和公司根据他们的专家意见做出的。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="参考">参考<!-- --><a href="https://huteming.github.io/blog/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89%E5%BE%AE%E4%BB%BB%E5%8A%A1#%E5%8F%82%E8%80%83" class="hash-link" aria-label="参考的直接链接" title="参考的直接链接">​</a></h2>
<!-- --><ul>
<!-- --><li><a href="https://stackoverflow.com/questions/66190571/what-was-the-motivation-for-introducing-a-separate-microtask-queue-which-the-eve" target="_blank" rel="noopener noreferrer">引入微任务队列的动机是什么？</a></li>
<!-- --><li><a href="https://www.youtube.com/watch?v=cCOL7MC4Pl0&amp;t=1447s" target="_blank" rel="noopener noreferrer">“In the loop”演示</a></li>
<!-- --></ul>]]></content:encoded>
            <category>js</category>
        </item>
        <item>
            <title><![CDATA[CAS]]></title>
            <link>https://huteming.github.io/blog/CAS</link>
            <guid>https://huteming.github.io/blog/CAS</guid>
            <pubDate>Thu, 25 Jan 2024 11:23:12 GMT</pubDate>
            <description><![CDATA[前置知识]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_hX6q" id="前置知识">前置知识<!-- --><a href="https://huteming.github.io/blog/CAS#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86" class="hash-link" aria-label="前置知识的直接链接" title="前置知识的直接链接">​</a></h2>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="sso">SSO<!-- --><a href="https://huteming.github.io/blog/CAS#sso" class="hash-link" aria-label="SSO的直接链接" title="SSO的直接链接">​</a></h3>
<!-- --><p>SSO 是英文 Single Sign On 的缩写，翻译过来就是单点登录。顾名思义，它把两个及以上个产品中的用户登录逻辑抽离出来，达到只输入一次用户名密码，就能同时登录多个产品的效果。</p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="cas">CAS<!-- --><a href="https://huteming.github.io/blog/CAS#cas" class="hash-link" aria-label="CAS的直接链接" title="CAS的直接链接">​</a></h3>
<!-- --><p>CAS （Central Authentication Service）中心授权服务.</p>
<!-- --><p>CAS Server 为需要独立部署的 Web 应用。</p>
<!-- --><p>SSO 仅仅是一种架构，一种设计，而 CAS 则是实现 SSO 的一种手段。两者是抽象与具体的关系。当然，除了 CAS 之外，实现 SSO 还有其他手段，比如简单的 cookie。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="时序图">时序图<!-- --><a href="https://huteming.github.io/blog/CAS#%E6%97%B6%E5%BA%8F%E5%9B%BE" class="hash-link" aria-label="时序图的直接链接" title="时序图的直接链接">​</a></h2>
<!-- --><p><img loading="lazy" alt="CAS访问时序图" src="https://huteming.github.io/assets/images/sequence-2c8d7ce5fff9414b92caa020b84747c2.png" width="781" height="1981" class="img_XlwT"></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="参考">参考<!-- --><a href="https://huteming.github.io/blog/CAS#%E5%8F%82%E8%80%83" class="hash-link" aria-label="参考的直接链接" title="参考的直接链接">​</a></h2>
<!-- --><ul>
<!-- --><li><a href="https://juejin.cn/post/6844903509272297480?searchId=202310240951579581C1DAFF0D3FD6AD65" target="_blank" rel="noopener noreferrer">前端需要了解的 SSO 与 CAS 知识</a></li>
<!-- --></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[删除commit]]></title>
            <link>https://huteming.github.io/blog/删除commit</link>
            <guid>https://huteming.github.io/blog/删除commit</guid>
            <pubDate>Thu, 25 Jan 2024 11:10:58 GMT</pubDate>
            <description><![CDATA[如果需要删除的不只是某个文件，而是交错的代码，那么有以下三种方法可以删除 commit 。]]></description>
            <content:encoded><![CDATA[<p>如果需要删除的不只是某个文件，而是交错的代码，那么有以下三种方法可以删除 commit 。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="git-reset">git reset<!-- --><a href="https://huteming.github.io/blog/%E5%88%A0%E9%99%A4commit#git-reset" class="hash-link" aria-label="git reset的直接链接" title="git reset的直接链接">​</a></h2>
<!-- --><ul>
<!-- --><li>git reset ：回滚到某次提交。</li>
<!-- --><li>git reset --soft：此次提交之后的修改会被退回到暂存区。</li>
<!-- --><li>git reset --hard：此次提交之后的修改不做任何保留，git status 查看工作区是没有记录的。</li>
<!-- --></ul>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="1-回滚代码">1. 回滚代码<!-- --><a href="https://huteming.github.io/blog/%E5%88%A0%E9%99%A4commit#1-%E5%9B%9E%E6%BB%9A%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="1. 回滚代码的直接链接" title="1. 回滚代码的直接链接">​</a></h3>
<!-- --><p>如果需要删除的 commit 是最新的，那么可以通过 git reset 命令将代码回滚到之前某次提交的状态，但一定要将现有的代码做好备份，否则回滚之后这些变动都会消失。具体操作如下：</p>
<!-- --><div class="language-bash codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-bash codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token plain"># HEAD 就会指向此次的提交记录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git reset --hard commit_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 强制推送到远端</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git push origin HEAD --force</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="2-误删恢复">2. 误删恢复<!-- --><a href="https://huteming.github.io/blog/%E5%88%A0%E9%99%A4commit#2-%E8%AF%AF%E5%88%A0%E6%81%A2%E5%A4%8D" class="hash-link" aria-label="2. 误删恢复的直接链接" title="2. 误删恢复的直接链接">​</a></h3>
<!-- --><p>如果回滚代码之后发现复制错了 commit_id，或者误删了某次 commit 记录，也可以通过下方代码恢复：</p>
<!-- --><div class="language-bash codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-bash codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token plain"># 复制要恢复操作的前面的 hash 值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git relog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 将 hash 换成要恢复的历史记录的 hash 值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git reset --hard hash</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="git-rebase">git rebase<!-- --><a href="https://huteming.github.io/blog/%E5%88%A0%E9%99%A4commit#git-rebase" class="hash-link" aria-label="git rebase的直接链接" title="git rebase的直接链接">​</a></h2>
<!-- --><p>如果中间的某次 commit 需要删除，可以通过 git rebase 命令实现，方法如下：</p>
<!-- --><div class="language-bash codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-bash codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token plain"># 将 commit_id 替换成要删除的 前一次 提交的 commit_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git rebase -i commit_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">进入 Vim 编辑模式，将要删除的 commit 前面的 `pick` 改成 `drop`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">保存并退出 Vim</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="git-revert">git revert<!-- --><a href="https://huteming.github.io/blog/%E5%88%A0%E9%99%A4commit#git-revert" class="hash-link" aria-label="git revert的直接链接" title="git revert的直接链接">​</a></h2>
<!-- --><ul>
<!-- --><li>get revert: 放弃某次提交。<!-- --><strong>之前的提交仍会保留在 git log 中，而此次撤销会做为一次新的提交。</strong></li>
<!-- --></ul>
<!-- --><div class="language-bash codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-bash codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token plain"># 撤销这次提交</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git revert commit_id</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>git</category>
        </item>
        <item>
            <title><![CDATA[文本换行]]></title>
            <link>https://huteming.github.io/blog/文本换行</link>
            <guid>https://huteming.github.io/blog/文本换行</guid>
            <pubDate>Thu, 25 Jan 2024 10:58:08 GMT</pubDate>
            <description><![CDATA[white-space、word-break、overflow-wrap(word-wrap) 三个属性整理]]></description>
            <content:encoded><![CDATA[<p><code>white-space</code>、<!-- --><code>word-break</code>、<!-- --><code>overflow-wrap(word-wrap)</code> 三个属性整理<!-- --></p>
<!-- -->
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="演示代码">演示代码<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#%E6%BC%94%E7%A4%BA%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="演示代码的直接链接" title="演示代码的直接链接">​</a></h2>
<!-- -->
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">box</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Hi</span><span class="token entity named-entity" style="color:#36acaa">&amp;nbsp;</span><span class="token entity named-entity" style="color:#36acaa">&amp;nbsp;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  This   is a incomprehensibilities long word.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  你好</span><span class="token entity named-entity" style="color:#36acaa">&amp;nbsp;</span><span class="token entity named-entity" style="color:#36acaa">&amp;nbsp;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  这   是一个空格分割的长单词</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  你好</span><span class="token entity named-entity" style="color:#36acaa">&amp;nbsp;</span><span class="token entity named-entity" style="color:#36acaa">&amp;nbsp;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  这---是一个短横线分割的长单词</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">br</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="1-white-space">1. white-space<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#1-white-space" class="hash-link" aria-label="1. white-space的直接链接" title="1. white-space的直接链接">​</a></h2>
<!-- --><p>这个属性是用来<!-- --><strong>控制空白字符的显示的</strong>，同时还能控制是否自动换行。它有五个值:<!-- --></p>
<!-- --><p><code>normal</code> | <!-- --><code>nowrap</code> | <!-- --><code>pre</code> | <!-- --><code>pre-wrap</code> | <!-- --><code>pre-line</code></p>
<!-- --><p>默认是 <!-- --><code>normal</code></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="11-nowrap">1.1 nowrap<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#11-nowrap" class="hash-link" aria-label="1.1 nowrap的直接链接" title="1.1 nowrap的直接链接">​</a></h3>
<!-- --><p><img loading="lazy" alt="white-space" src="https://huteming.github.io/assets/images/whiteSpace-nowrap-cde4b30bca2d9048c56f047d2111868f.png" width="633" height="152" class="img_XlwT"></p>
<!-- --><p>不仅空格被合并，换行符无效，连原本的自动换行都没了！只有<!-- --><code>&lt;br&gt;</code>才能导致换行！所以这个值的表现还是挺简单的，可以理解为<!-- --><code>永不换行</code>。<!-- --></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="12-pre">1.2 pre<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#12-pre" class="hash-link" aria-label="1.2 pre的直接链接" title="1.2 pre的直接链接">​</a></h3>
<!-- --><p><img loading="lazy" alt="white-space" src="https://huteming.github.io/assets/images/whiteSpace-pre-9d5ec01e26456e01b84796b307d24ca8.png" width="646" height="238" class="img_XlwT"></p>
<!-- --><p>空格和换行符全都被保留了下来！<!-- --><code>不过自动换行是没了</code>。保留，所以<!-- --><code>pre</code>其实是<!-- --><code>preserve</code>的缩写，这样就好记了。<!-- --></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="13-pre-wrap">1.3 pre-wrap<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#13-pre-wrap" class="hash-link" aria-label="1.3 pre-wrap的直接链接" title="1.3 pre-wrap的直接链接">​</a></h3>
<!-- --><p><img loading="lazy" alt="white-space" src="https://huteming.github.io/assets/images/whiteSpace-preWrap-b61055232991b12b1a53d1ca430d6dee.png" width="511" height="350" class="img_XlwT"></p>
<!-- --><p>显然<!-- --><code>pre-wrap</code>就是<!-- --><code>preserve</code> + <!-- --><code>wrap</code>，保留空格和换行符，且可以自动换行。<!-- --></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="14-pre-line">1.4 pre-line<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#14-pre-line" class="hash-link" aria-label="1.4 pre-line的直接链接" title="1.4 pre-line的直接链接">​</a></h3>
<!-- --><p><img loading="lazy" alt="white-space" src="https://huteming.github.io/assets/images/whiteSpace-preLine-300e98fcd249dd49605e65e45c8104e9.png" width="506" height="299" class="img_XlwT"></p>
<!-- --><p>空格被合并了，但是换行符可以发挥作用，<!-- --><code>pre-line</code> 应该是 <!-- --><code>preserve new lines without spaces</code></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="15-属性对比">1.5 属性对比<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#15-%E5%B1%9E%E6%80%A7%E5%AF%B9%E6%AF%94" class="hash-link" aria-label="1.5 属性对比的直接链接" title="1.5 属性对比的直接链接">​</a></h3>
<!-- --><table><thead><tr><th>属性</th><th>换行符</th><th>空格</th><th>自动换行</th><th>nbsp</th></tr></thead><tbody><tr><td>normal</td><td>❌</td><td>❌（合并）</td><td>✅</td><td>✅</td></tr><tr><td>nowrap</td><td>❌</td><td>❌（合并）</td><td>❌</td><td>✅</td></tr><tr><td>pre</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td></tr><tr><td>pre-wrap</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>pre-line</td><td>✅</td><td>❌（合并）</td><td>✅</td><td>✅</td></tr></tbody></table>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="2-word-break">2. word-break<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#2-word-break" class="hash-link" aria-label="2. word-break的直接链接" title="2. word-break的直接链接">​</a></h2>
<!-- --><p>这个属性是<!-- --><strong>控制单词如何被拆分换行</strong>的。它有三个值：<!-- --></p>
<!-- --><p><code>normal</code> 、<!-- --><code>break-all</code> 、<!-- --><code>keep-all</code></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="21-keep-all">2.1 keep-all<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#21-keep-all" class="hash-link" aria-label="2.1 keep-all的直接链接" title="2.1 keep-all的直接链接">​</a></h3>
<!-- --><p><img loading="lazy" alt="word-break" src="https://huteming.github.io/assets/images/wordBreak-keepAll-952fa0b84fd8cc271f95502dfd87e7f0.png" width="559" height="351" class="img_XlwT"></p>
<!-- --><p><strong>所有“单词”一律不拆分换行</strong>。<!-- --></p>
<!-- --><p>注意，我这里的“单词”包括连续的中文字符（还有日文、韩文等），或者可以理解为只有<!-- --><strong>空格或连字符 - 时拆分单词</strong>可以触发自动换行<!-- --></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="22-break-all">2.2 break-all<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#22-break-all" class="hash-link" aria-label="2.2 break-all的直接链接" title="2.2 break-all的直接链接">​</a></h3>
<!-- --><p><img loading="lazy" alt="word-break" src="https://huteming.github.io/assets/images/wordBreak-breakAll-35a9c33629ab02a7cbc63d0d6ffcad3e.png" width="508" height="348" class="img_XlwT"></p>
<!-- --><p><strong>所有单词碰到边界一律拆分换行</strong>。<!-- --></p>
<!-- --><p>不管你是 incomprehensibilities 这样一行都显示不下的单词，还是 long 这样很短的单词，只要碰到边界，都会被强制拆分换行。</p>
<!-- --><p><strong>所以用 word-break<!-- -->:break-all<!-- --> 时要慎重呀<!-- --></strong></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="3-overflow-wrap">3. overflow-wrap<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#3-overflow-wrap" class="hash-link" aria-label="3. overflow-wrap的直接链接" title="3. overflow-wrap的直接链接">​</a></h2>
<!-- --><p><code>overflow-wrap</code> 也叫做 <!-- --><code>word-wrap</code></p>
<!-- --><div class="theme-admonition theme-admonition-tip admonition_BnpG alert alert--success"><div class="admonitionHeading_yLnc"><span class="admonitionIcon_lRJX"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>MDN 注<!-- --></div><div class="admonitionContent_k86W"><p><code>word-wrap</code> 属性原本属于微软的一个私有属性，在 CSS3 现在的文本规范草案中已经被重名为 <!-- --><code>overflow-wrap</code> 。<!-- --></p><p><code>word-wrap</code> 现在被当作 <!-- --><code>overflow-wrap</code> 的 “别名”。 稳定的谷歌 Chrome 和 Opera 浏览器版本支持这种新语法。<!-- --></p></div></div>
<!-- --><p><strong>这个属性也是控制单词如何被拆分换行的</strong>，实际上是作为<!-- --><code>word-break</code>的互补，它只有两个值：<!-- --></p>
<!-- --><p><code>normal</code> | <!-- --><code>break-word</code></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="31-break-word">3.1 break-word<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#31-break-word" class="hash-link" aria-label="3.1 break-word的直接链接" title="3.1 break-word的直接链接">​</a></h3>
<!-- --><p><img loading="lazy" alt="word-break" src="https://huteming.github.io/assets/images/overflowWrap-breakWord-6ae2e68c99d0e1763e07b8611bd28e03.png" width="540" height="382" class="img_XlwT"></p>
<!-- --><p>只有<!-- --><strong>当一个单词一整行都显示不下时，才会拆分换行该单词</strong>。<!-- --></p>
<!-- --><p>overflow，只有长到溢出的单词才会被强制拆分换行！</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="总结">总结<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#%E6%80%BB%E7%BB%93" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<!-- --><p>最后总结一下三个属性</p>
<!-- --><ul>
<!-- --><li>
<!-- --><p>white-space，<!-- --><strong>控制空白字符的显示</strong>，同时还能控制是否自动换行。它有五个值: <!-- --><code>normal</code> | <!-- --><code>nowrap</code> | <!-- --><code>pre</code> | <!-- --><code>pre-wrap</code> | <!-- --><code>pre-line</code></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>word-break，<!-- --><strong>控制单词如何被拆分换行</strong>。它有三个值: <!-- --><code>normal</code> | <!-- --><code>break-all</code> | <!-- --><code>keep-all</code></p>
<!-- --></li>
<!-- --><li>
<!-- --><p>overflow-wrap（word-wrap）<!-- --><strong>控制长度超过一行的单词是否被拆分换行</strong>，是<!-- --><code>word-break</code>的补充，它有两个值: <!-- --><code>normal</code> | <!-- --><code>break-word</code></p>
<!-- --></li>
<!-- --></ul>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="在线演示">在线演示<!-- --><a href="https://huteming.github.io/blog/%E6%96%87%E6%9C%AC%E6%8D%A2%E8%A1%8C#%E5%9C%A8%E7%BA%BF%E6%BC%94%E7%A4%BA" class="hash-link" aria-label="在线演示的直接链接" title="在线演示的直接链接">​</a></h2>
<!-- --><p><a href="https://codesandbox.io/s/yan-zheng-white-space-36xsq?file=/src/App.js" target="_blank" rel="noopener noreferrer">codesandbox 演示地址</a></p>
<!-- --><div>下面的选项会改变右边框框的样式，左边框框的样式不会变 <!-- --><br><div><div class="box_jUna">
  Hi&nbsp;&nbsp;,
  This   is a incomprehensibilities long word.
  <br>
  <br>
  你好&nbsp;&nbsp;,
  这   是一个空格分割的长单词
  <br>
  <br>
  你好&nbsp;&nbsp;,
  这---是一个短横线分割的长单词
  <br>
  <br>
  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
</div><div id="example" class="box_jUna" style="white-space:normal;word-break:normal;overflow-wrap:normal">
  Hi&nbsp;&nbsp;,
  This   is a incomprehensibilities long word.
  <br>
  <br>
  你好&nbsp;&nbsp;,
  这   是一个空格分割的长单词
  <br>
  <br>
  你好&nbsp;&nbsp;,
  这---是一个短横线分割的长单词
  <br>
  <br>
  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
</div><div style="clear:both"></div></div><br><div>white-space:<!-- --><select id="s1"><option value="normal" selected="">normal<!-- --></option><option value="nowrap">nowrap<!-- --></option><option value="pre">pre<!-- --></option><option value="pre-wrap">pre-wrap<!-- --></option><option value="pre-line">pre-line<!-- --></option></select></div><div>word-break:<!-- --><select id="s2"><option value="normal" selected="">normal<!-- --></option><option value="keep-all">keep-all<!-- --></option><option value="break-all">break-all<!-- --></option><option value="break-word">break-word<!-- --></option></select></div><div>overflow-wrap:<!-- --><select id="s3"><option value="normal" selected="">normal<!-- --></option><option value="break-word">break-word<!-- --></option></select></div></div>]]></content:encoded>
            <category>css</category>
        </item>
        <item>
            <title><![CDATA[为什么需要 refresh token]]></title>
            <link>https://huteming.github.io/blog/为什么需要 refresh token</link>
            <guid>https://huteming.github.io/blog/为什么需要 refresh token</guid>
            <pubDate>Thu, 25 Jan 2024 06:02:38 GMT</pubDate>
            <description><![CDATA[为什么需要 access token 和 refresh token？]]></description>
            <content:encoded><![CDATA[<p><strong>为什么需要 access token 和 refresh token？</strong></p>
<!-- --><p>从权限上说，<!-- --><code>refresh token</code> 是和授权服务器之间的凭证, <!-- --><code>access token</code> 是和资源服务器之间的凭证。<!-- --></p>
<!-- --><p>现代架构之所以用 token ，是因为后端普遍采用分布式，各服务器之间同步状态（比如 session ）的开销很大，所以干脆不用状态，而是给个 token ，后端各自验证 token 的有效性而无需与其他服务器沟通，这就是所谓的 stateless 。</p>
<!-- --><p>stateless 在绝大多数时候都没问题，但我们却不太可能实现彻底的无状态。比如用户修改了密码，服务端想强制他重新登录，这就得通知各个服务器不要再接受之前的 token 了。</p>
<!-- --><p>要解决这个问题，常见的有 3 种方法：</p>
<!-- --><ol>
<!-- --><li>找个地方（内存、数据库等）记录合法的 token ，每次验证 token 都查一下这个 token 是否还在。</li>
<!-- --><li>找个地方（内存、数据库等）记录 token 的黑名单，每次验证 token 都查一下这个 token 是否在黑名单里。</li>
<!-- --><li>让 token 自己失效。</li>
<!-- --></ol>
<!-- --><p>前两种都是有状态的方法，仍然避免不了状态同步的瓶颈，所以我们一般采用第三种方法。</p>
<!-- --><p>那怎么让 token 自己失效呢？ token 里一般都有时间信息，所以只需把有效期设得短一点，不再更新它，它就过期失效了。</p>
<!-- --><p>这就引出了更新的问题，怎么更新 token 呢？我们一般用另一个 token ，这就是所谓的 refresh token 。服务端收到 refresh token 以后，是要检查黑名单或者白名单的，所以更新 token 这一步是有状态的。只有 refresh token 有效，才会下发 access token ，这样就把对状态同步的需求限制到了一个很小的范围内，从而降低状态同步成本。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="参考">参考<!-- --><a href="https://huteming.github.io/blog/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%20refresh%20token#%E5%8F%82%E8%80%83" class="hash-link" aria-label="参考的直接链接" title="参考的直接链接">​</a></h2>
<!-- --><ul>
<!-- --><li><a href="https://v2ex.com/t/820927" target="_blank" rel="noopener noreferrer">关于 token 过期的疑惑，为什么需要 refresh token？</a></li>
<!-- --></ul>]]></content:encoded>
            <category>html</category>
        </item>
        <item>
            <title><![CDATA[css加载会造成阻塞吗]]></title>
            <link>https://huteming.github.io/blog/css加载会造成阻塞吗</link>
            <guid>https://huteming.github.io/blog/css加载会造成阻塞吗</guid>
            <pubDate>Thu, 25 Jan 2024 05:46:36 GMT</pubDate>
            <description><![CDATA[总所周知，JS 执行会阻塞 DOM 树的解析和渲染。]]></description>
            <content:encoded><![CDATA[<p>总所周知，JS 执行会阻塞 DOM 树的解析和渲染。</p>
<!-- --><p>那么 css 加载会阻塞 DOM 树的解析和渲染吗？</p>
<!-- --><p>为了完成本次测试，首先需要限制 chrome 的下载速度，如图：</p>
<!-- --><p><img loading="lazy" alt="network" src="https://huteming.github.io/assets/images/network-aa79fd7f4f714336c6c0f6e07ba78a3f.png" width="3070" height="242" class="img_XlwT"></p>
<!-- --><p>选择预设值或者是自己新增一个自己想要的网速都行，只要测试时网速<!-- --><strong>够慢</strong>！<!-- --></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="css-加载会阻塞-dom-树的解析渲染吗">css 加载会阻塞 DOM 树的解析渲染吗？<!-- --><a href="https://huteming.github.io/blog/css%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%80%A0%E6%88%90%E9%98%BB%E5%A1%9E%E5%90%97#css-%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%98%BB%E5%A1%9E-dom-%E6%A0%91%E7%9A%84%E8%A7%A3%E6%9E%90%E6%B8%B2%E6%9F%93%E5%90%97" class="hash-link" aria-label="css 加载会阻塞 DOM 树的解析渲染吗？的直接链接" title="css 加载会阻塞 DOM 树的解析渲染吗？的直接链接">​</a></h2>
<!-- --><p>测试代码：</p>
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">css阻塞</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">      </span><span class="token style language-css selector" style="color:#00009f">h1</span><span class="token style language-css"> </span><span class="token style language-css punctuation" style="color:#393A34">{</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">        </span><span class="token style language-css property" style="color:#36acaa">color</span><span class="token style language-css punctuation" style="color:#393A34">:</span><span class="token style language-css"> </span><span class="token style language-css color">red</span><span class="token style language-css"> </span><span class="token style language-css important">!important</span><span class="token style language-css punctuation" style="color:#393A34">;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">      </span><span class="token style language-css punctuation" style="color:#393A34">}</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:#00009f">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:#d73a49">h</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">querySelectorAll</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'h1'</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript function" style="color:#d73a49">setTimeout</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript">h</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:#36acaa">0</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">这是红色的</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>假设： css 加载会阻塞 DOM 树解析和渲染</p>
<!-- --><p>假设结果: 在 bootstrap.css 还没加载完之前，下面的内容不会被解析渲染，那么我们一开始看到的应该是白屏，h1 不会显示出来。并且此时 console.log 的结果应该是一个空数组。</p>
<!-- --><p>实际结果:如下图</p>
<!-- --><p><img loading="lazy" src="https://huteming.github.io/assets/images/block-render-17c82657a48111614268fcabca29a88c.gif" width="1920" height="985" class="img_XlwT"></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="css-会阻塞-dom-树解析">css 会阻塞 DOM 树解析？<!-- --><a href="https://huteming.github.io/blog/css%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%80%A0%E6%88%90%E9%98%BB%E5%A1%9E%E5%90%97#css-%E4%BC%9A%E9%98%BB%E5%A1%9E-dom-%E6%A0%91%E8%A7%A3%E6%9E%90" class="hash-link" aria-label="css 会阻塞 DOM 树解析？的直接链接" title="css 会阻塞 DOM 树解析？的直接链接">​</a></h3>
<!-- --><p>由上图我们可以看到，当 css 还没加载完成的时候，h1 并没有显示，但是此时控制台输出如下</p>
<!-- --><p><img loading="lazy" src="data:image/png;base64,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" width="635" height="72" class="img_XlwT"></p>
<!-- --><p>可以得知，此时 DOM 树至少已经解析完成到了 h1 那里，而此时 css 还没加载完成，也就说明，<!-- --><strong>css 并不会阻塞 DOM 树的解析</strong>。<!-- --></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="css-加载会阻塞-dom-树渲染">css 加载会阻塞 DOM 树渲染？<!-- --><a href="https://huteming.github.io/blog/css%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%80%A0%E6%88%90%E9%98%BB%E5%A1%9E%E5%90%97#css-%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%98%BB%E5%A1%9E-dom-%E6%A0%91%E6%B8%B2%E6%9F%93" class="hash-link" aria-label="css 加载会阻塞 DOM 树渲染？的直接链接" title="css 加载会阻塞 DOM 树渲染？的直接链接">​</a></h3>
<!-- --><p>由上图，我们也可以看到，当 css 还没加载出来的时候，页面显示白屏，直到 css 加载完成之后，红色字体才显示出来，也就是说，下面的内容虽然解析了，但是并没有被渲染出来。所以，<!-- --><strong>css 加载会阻塞 DOM 树渲染</strong>。<!-- --></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="css-加载会阻塞-js-运行吗">css 加载会阻塞 JS 运行吗？<!-- --><a href="https://huteming.github.io/blog/css%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%80%A0%E6%88%90%E9%98%BB%E5%A1%9E%E5%90%97#css-%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%98%BB%E5%A1%9E-js-%E8%BF%90%E8%A1%8C%E5%90%97" class="hash-link" aria-label="css 加载会阻塞 JS 运行吗？的直接链接" title="css 加载会阻塞 JS 运行吗？的直接链接">​</a></h2>
<!-- --><p>​css 加载会不会阻塞 JS 执行呢?</p>
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">css阻塞</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'before css'</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> startDate </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name">Date</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">这是红色的</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:#00009f">var</span><span class="token script language-javascript"> endDate </span><span class="token script language-javascript operator" style="color:#393A34">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name">Date</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'after css'</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'经过了'</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">+</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript">endDate </span><span class="token script language-javascript operator" style="color:#393A34">-</span><span class="token script language-javascript"> startDate</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#393A34">+</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">'ms'</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>假设: css 加载会阻塞后面的 JS 运行</p>
<!-- --><p>预期结果: 在 link 后面的 JS 代码，应该要在 css 加载完成后才会运行</p>
<!-- --><p>实际结果:</p>
<!-- --><p><img loading="lazy" src="https://huteming.github.io/assets/images/block-js-1838e979e727c69ef4801f11958df61e.gif" width="1920" height="985" class="img_XlwT"></p>
<!-- --><p>由上图我们可以看出，位于 css 加载语句前的那个 JS 代码先执行了，但是位于 css 加载语句后面的代码迟迟没有执行，直到 css 加载完成后，它才执行。这也就说明了，<!-- --><strong>css 加载会阻塞后面的 JS 语句的执行</strong>。<!-- --></p>
<!-- --><p>详细结果看下图(css 加载用了 5600+ms):</p>
<!-- --><p><img loading="lazy" src="data:image/png;base64,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" width="705" height="152" class="img_XlwT"></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="domcontentloaded">DOMContentLoaded<!-- --><a href="https://huteming.github.io/blog/css%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%80%A0%E6%88%90%E9%98%BB%E5%A1%9E%E5%90%97#domcontentloaded" class="hash-link" aria-label="DOMContentLoaded的直接链接" title="DOMContentLoaded的直接链接">​</a></h2>
<!-- --><p>对于浏览器来说，页面加载主要有两个事件，一个是 DOMContentLoaded，另一个是 onLoad。而 onLoad 没什么好说的，就是等待页面的所有资源都加载完成才会触发，这些资源包括 css、js、图片视频等。</p>
<!-- --><p>而 DOMContentLoaded，顾名思义，就是当页面的内容解析完成后，则触发该事件。那么，正如我们上面讨论过的，css 会阻塞 DOM 渲染和 JS 执行，而 JS 会阻塞 DOM 解析。那么我们可以做出这样的假设</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>当页面只存在 css，或者 JS 都在 css 前面，那么 DomContentLoaded 不需要等到 css 加载完毕。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>当页面里同时存在 css 和 js，并且 JS 在 css 后面的时候，DomContentLoaded 必须等到 css 和 JS 都加载完毕才触发。</p>
<!-- --></li>
<!-- --></ol>
<!-- --><p>我们先对第一种情况做测试：</p>
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">css阻塞</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">addEventListener</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'DOMContentLoaded'</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'DOMContentLoaded'</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>复制代码实验结果如下图：</p>
<!-- --><p><img loading="lazy" src="https://huteming.github.io/assets/images/block-loaded-b942ea472ef037bfedd242467a9b368d.gif" width="600" height="337" class="img_XlwT"></p>
<!-- --><p>从动图我们可以看出来，<!-- --><strong>css 还未加载完，就已经触发了 DOMContentLoaded 事件了</strong>。因为 css 后面没有任何 JS 代码。<!-- --></p>
<!-- --><p>接下来我们对第二种情况做测试，很简单，就在 css 后面加一行代码就行了</p>
<!-- --><div class="language-html codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-html codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">css阻塞</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">UTF-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">addEventListener</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'DOMContentLoaded'</span><span class="token script language-javascript punctuation" style="color:#393A34">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:#00009f">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#393A34">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">        </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'DOMContentLoaded'</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:#393A34">}</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://cdn.bootcss.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">      </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">log</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">'到我了没'</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>复制代码实验结果如下图：</p>
<!-- --><p><img loading="lazy" src="https://huteming.github.io/assets/images/block-loaded-css+js-cb85dda64df9dbea6162a54a6ca7107d.gif" width="599" height="344" class="img_XlwT"></p>
<!-- --><p>我们可以看到，<!-- --><strong>只有在 css 加载完成后，才会触发 DOMContentLoaded 事件</strong>。<!-- --></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="结论">结论<!-- --><a href="https://huteming.github.io/blog/css%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%80%A0%E6%88%90%E9%98%BB%E5%A1%9E%E5%90%97#%E7%BB%93%E8%AE%BA" class="hash-link" aria-label="结论的直接链接" title="结论的直接链接">​</a></h2>
<!-- --><p>由上所述，我们可以得出以下结论:</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>css 加载不会阻塞 DOM 树的解析</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>css 加载会阻塞 DOM 树的渲染</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>css 加载会阻塞后面 JS 语句的执行</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>当页面只存在 css，或者 JS 都在 css 前面，那么 DomContentLoaded 不需要等到 css 加载完毕。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>当页面里同时存在 css 和 JS, 并且 JS 在 css 后面的时候，DomContentLoaded 必须等到 css 和 JS 都加载完毕才触发。</p>
<!-- --></li>
<!-- --></ol>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="原理解析">原理解析<!-- --><a href="https://huteming.github.io/blog/css%E5%8A%A0%E8%BD%BD%E4%BC%9A%E9%80%A0%E6%88%90%E9%98%BB%E5%A1%9E%E5%90%97#%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90" class="hash-link" aria-label="原理解析的直接链接" title="原理解析的直接链接">​</a></h2>
<!-- --><p><strong>webkit 渲染过程</strong></p>
<!-- --><p><img loading="lazy" src="https://huteming.github.io/assets/images/render-process-42fa211811a883ba8db8e143c620c382.png" width="624" height="289" class="img_XlwT"></p>
<!-- --><p>从上面两个流程图我们可以看出来，浏览器渲染的流程如下：</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>HTML 解析文件，生成 DOM Tree，解析 CSS 文件生成 CSSOM Tree</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>将 DOM Tree 和 CSSOM Tree 结合，生成 Render Tree(渲染树)</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>根据 Render Tree 渲染绘制，将像素渲染到屏幕上。</p>
<!-- --></li>
<!-- --></ol>
<!-- --><p>从流程我们可以看出来</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>DOM 解析和 CSS 解析是两个并行的进程，所以这也解释了为什么 CSS 加载不会阻塞 DOM 的解析。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>然而，由于 Render Tree 是依赖于 DOM Tree 和 CSSOM Tree 的，所以他必须等待到 CSSOM Tree 构建完成，也就是 CSS 资源加载完成(或者 CSS 资源加载失败)后，才能开始渲染。因此，CSS 加载是会阻塞 DOM 的渲染的。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>由于 JS 可能会操作之前的 DOM 节点和 css 样式，因此浏览器会维持 html 中 css 和 JS 的顺序。因此，样式表会在后面的 JS 执行前先加载执行完毕。所以 css 会阻塞后面 JS 的执行。</p>
<!-- --></li>
<!-- --></ol>]]></content:encoded>
            <category>css</category>
            <category>性能优化</category>
        </item>
        <item>
            <title><![CDATA[prettier 与 eslint 的集成]]></title>
            <link>https://huteming.github.io/blog/prettier 与 eslint 的集成</link>
            <guid>https://huteming.github.io/blog/prettier 与 eslint 的集成</guid>
            <pubDate>Thu, 25 Jan 2024 02:26:44 GMT</pubDate>
            <description><![CDATA[聊聊 prettier 与 eslint 的区别，以及它们同时使用时该如何配置。]]></description>
            <content:encoded><![CDATA[<p>聊聊 prettier 与 eslint 的区别，以及它们同时使用时该如何配置。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="prettier-简介">Prettier 简介<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#prettier-%E7%AE%80%E4%BB%8B" class="hash-link" aria-label="Prettier 简介的直接链接" title="Prettier 简介的直接链接">​</a></h2>
<!-- --><p>官网介绍: <!-- --><a href="https://prettier.io/docs/en/index.html" target="_blank" rel="noopener noreferrer">链接</a></p>
<!-- --><p>Prettier 是由 Facebook 公司开发的 opinionated 的<!-- --><code>代码格式化工具</code>，它移除了代码的原始风格，并确保所有输出的代码遵守一致的风格。<!-- --></p>
<!-- --><p>所谓 opinionated，就是指 Prettier 强制规定了一些风格，你必须按照它指定的方式去组织代码。要是不赞成 Prettier 的风格，就不要使用它。</p>
<!-- --><p>Prettier 也提供了极少的、必要的配置项，允许用户对一些较有争议的选项进行定制，除此之外的大部分规则都不允许配置，因为配置项越多，关于风格的争吵就会越多。</p>
<!-- --><p>Prettier 会忽略代码的原始风格，并将代码解析为 AST，按照 Prettier 自己的规则并将最大行长度纳入考虑范围内，将 AST 重新输出为新的风格的代码。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="eslint-简介">Eslint 简介<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#eslint-%E7%AE%80%E4%BB%8B" class="hash-link" aria-label="Eslint 简介的直接链接" title="Eslint 简介的直接链接">​</a></h2>
<!-- --><p>官网介绍: <!-- --><a href="https://cn.eslint.org/docs/about/" target="_blank" rel="noopener noreferrer">链接</a></p>
<!-- --><p>ESLint 是一个开源的 <!-- --><code>JavaScript 代码检查工具</code>，由 Nicholas C. Zakas 于 2013 年 6 月创建。代码检查是一种静态的分析，常用于寻找有问题的模式或者代码，并且不依赖于具体的编码风格。对大多数编程语言来说都会有代码检查，一般来说编译程序会内置检查工具。<!-- --></p>
<!-- --><p>JavaScript 是一个动态的弱类型语言，在开发中比较容易出错。因为没有编译程序，为了寻找 JavaScript 代码错误通常需要在执行过程中不断调试。像 ESLint 这样的可以让程序员在编码的过程中发现问题而不是在执行的过程中。</p>
<!-- --><p>ESLint 的初衷是为了让程序员可以创建自己的检测规则。ESLint 的所有规则都被设计成可插入的。ESLint 的默认规则与其他的插件并没有什么区别，规则本身和测试可以依赖于同样的模式。为了便于人们使用，ESLint 内置了一些规则，当然，你可以在使用过程中自定义规则。</p>
<!-- --><p>ESLint 使用 Node.js 编写，这样既可以有一个快速的运行环境的同时也便于安装。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="prettier-与-linters-关系">Prettier 与 Linters 关系<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#prettier-%E4%B8%8E-linters-%E5%85%B3%E7%B3%BB" class="hash-link" aria-label="Prettier 与 Linters 关系的直接链接" title="Prettier 与 Linters 关系的直接链接">​</a></h2>
<!-- --><p>各种 Linters 是按照规则(Rules)去检查代码的，遇到不符合规则的代码就会提示你，有的规则还能自动帮你解决冲突。</p>
<!-- --><p>这些规则分为两类：</p>
<!-- --><ol>
<!-- --><li>格式化类的规则，比如：</li>
<!-- --></ol>
<!-- --><ul>
<!-- --><li>max-len</li>
<!-- --><li>no-mixed-spaces-and-tabs</li>
<!-- --><li>keyword-spacing</li>
<!-- --><li>comma-style</li>
<!-- --></ul>
<!-- --><ol start="2">
<!-- --><li>代码质量类的规则，比如：</li>
<!-- --></ol>
<!-- --><ul>
<!-- --><li>no-unused-vars</li>
<!-- --><li>no-extra-bind</li>
<!-- --><li>no-implicit-globals</li>
<!-- --><li>prefer-promise-reject-errors</li>
<!-- --></ul>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="对于格式化类的规则">对于格式化类的规则<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E5%AF%B9%E4%BA%8E%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%B1%BB%E7%9A%84%E8%A7%84%E5%88%99" class="hash-link" aria-label="对于格式化类的规则的直接链接" title="对于格式化类的规则的直接链接">​</a></h3>
<!-- --><p>当 ESLint 遇到上面的 incorrect code 的时候，会提示你违反规则，让你修改代码以符合规则。</p>
<!-- --><p>而 Prettier 则不会这么麻烦，它根本不管你之前符不符合什么规则，都先把你的代码解析成 AST，然后按照它自己的风格给你重新输出代码。所以对于这类规则，在你用了 Prettier 之后，就不会再违反这类规则了！也不需要你自己手动修改代码。</p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="对于代码质量的规则">对于代码质量的规则<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E5%AF%B9%E4%BA%8E%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E7%9A%84%E8%A7%84%E5%88%99" class="hash-link" aria-label="对于代码质量的规则的直接链接" title="对于代码质量的规则的直接链接">​</a></h3>
<!-- --><p>Prettier 对这类规则束手无策。而且这类规则也正是各种 Linters 的重点，因为它们真的能帮你发现很多低级的 Bug。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="使用场景">使用场景<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" class="hash-link" aria-label="使用场景的直接链接" title="使用场景的直接链接">​</a></h2>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="日常演示类代码">日常演示类代码<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E6%97%A5%E5%B8%B8%E6%BC%94%E7%A4%BA%E7%B1%BB%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="日常演示类代码的直接链接" title="日常演示类代码的直接链接">​</a></h3>
<!-- --><p>这类场景，推荐在自己的编辑器中配置 Prettier 插件及规则，这类场景基本也不太关心代码质量。</p>
<!-- --><p>在 Prettier 后能输出一套统一的风格，有利于代码的可读性，也不会像 Eslint 而在文件中有很多的异常提示。</p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="项目开发">项目开发<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91" class="hash-link" aria-label="项目开发的直接链接" title="项目开发的直接链接">​</a></h3>
<!-- --><p>这类场景可以根据需要在 Prettier 和 Eslint 中任意选择，甚至都集成也不是不可以。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="lint-和-prettier-配合使用">Lint 和 Prettier 配合使用<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#lint-%E5%92%8C-prettier-%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8" class="hash-link" aria-label="Lint 和 Prettier 配合使用的直接链接" title="Lint 和 Prettier 配合使用的直接链接">​</a></h2>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="为什么要配合使用">为什么要配合使用？<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8" class="hash-link" aria-label="为什么要配合使用？的直接链接" title="为什么要配合使用？的直接链接">​</a></h3>
<!-- --><p>第一在 ESLint 推出 --fix 参数前，ESLint 并没有自动化格式代码的功能，要对一些格式问题做批量格式化只能用 Prettier 这样的工具。</p>
<!-- --><p>第二 ESLint 的规则并不能完全包含 Prettier 的规则，两者不是简单的谁替代谁的问题。但是在 ESLint 推出 --fix 命令行参数之后，如果你觉得 ESLint 提供的格式化代码够用了，也可以不使用 Prettier。</p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="如何配合使用">如何配合使用？<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E5%A6%82%E4%BD%95%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8" class="hash-link" aria-label="如何配合使用？的直接链接" title="如何配合使用？的直接链接">​</a></h3>
<!-- --><p>对于他们交集的部分规则，ESLint 和 Prettier 格式化后的代码格式不一致。导致的问题是：当你用 Prettier 格式化代码后再用 ESLint 去检测，会出现一些因为格式化导致的 warning。</p>
<!-- --><p>这个时候有两个解决方案：</p>
<!-- --><ol>
<!-- --><li>
<!-- --><p>运行 Prettier 之后，再使用 eslint --fix 格式化一把，这样把冲突的部分以 ESLint 的格式为标准覆盖掉，剩下的 warning 就都是代码质量问题了。</p>
<!-- --></li>
<!-- --><li>
<!-- --><p>在配置 ESLint 的校验规则时候把和 Prettier 冲突的规则 disable 掉，然后再使用 Prettier 的规则作为校验规则。那么使用 Prettier 格式化后，使用 ESLint 校验就不会出现对冲突部分的 warning。</p>
<!-- --></li>
<!-- --></ol>
<!-- --><p>为什么不能先使用 ESLint 再使用 Prettier?</p>
<!-- --><p>是因为 Eslint 才会出现最终的异常提示。如果 Eslint 的规则和 Prettier 规则一致，那么在 Eslint 之后就没必要配置 Prettier；如果不一致，那么最终还是会出现 Eslint 的 warning。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="lint-和-prettier-集成实践">Lint 和 Prettier 集成实践<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#lint-%E5%92%8C-prettier-%E9%9B%86%E6%88%90%E5%AE%9E%E8%B7%B5" class="hash-link" aria-label="Lint 和 Prettier 集成实践的直接链接" title="Lint 和 Prettier 集成实践的直接链接">​</a></h2>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="eslint-config-prettier">eslint-config-prettier<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#eslint-config-prettier" class="hash-link" aria-label="eslint-config-prettier的直接链接" title="eslint-config-prettier的直接链接">​</a></h3>
<!-- --><p><code>eslint-config-prettier</code> 是 ESLint 的配置库，用于关闭那些不需要或与 Prettier 冲突的 ESLint 规则。这可以让你在使用 Prettier 时，可以使用你最喜欢的 ESLint 共享配置而不使用该共享配置里有关样式的规则。注意，这个配置只是关闭规则，因此仅在与其他配置一起使用时才有意义。<!-- --></p>
<!-- --><p>若是单独使用 eslint-config-prettier（即不使用 eslint-plugin-prettier），则应该如下继承配置:</p>
<!-- --><div class="language-js codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-js codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// .eslintrc.*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"some-other-config-you-use"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prettier"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>注意: 因为 eslint-config-prettier 是要关闭其他配置的样式规则，所以必须放在其他 ESLint 配置之后。</p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="eslint-plugin-prettier">eslint-plugin-prettier<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#eslint-plugin-prettier" class="hash-link" aria-label="eslint-plugin-prettier的直接链接" title="eslint-plugin-prettier的直接链接">​</a></h3>
<!-- --><p>eslint-plugin-prettier 是使用 Prettier 进行格式化的 ESLint 插件，它会将 Pretter 作为 ESLint 的一条规则来运行并进行格式化，然后与格式化之前的代码进行对比，如果出现了不一致，这个地方就会被 Prettier 进行标记并报告出来。</p>
<!-- --><p>若是单独使用 eslint-plugin-prettier（即不使用 eslint-config-prettier），则应该如下进行配置:</p>
<!-- --><div class="language-js codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-js codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// .eslintrc.*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"plugins"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"prettier"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"rules"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"prettier/prettier"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"error"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="集成">集成<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E9%9B%86%E6%88%90" class="hash-link" aria-label="集成的直接链接" title="集成的直接链接">​</a></h3>
<!-- --><p>正常情况下，会同时使用 <!-- --><code>eslint-plugin-prettier</code> 和 <!-- --><code>eslint-config-prettier</code>，其配置为:<!-- --></p>
<!-- --><div class="language-js codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-js codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// .eslintrc.*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"some-other-config-you-use"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"prettier"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"plugins"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"prettier"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"rules"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">"prettier/prettier"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"error"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="推荐配置">推荐配置<!-- --><a href="https://huteming.github.io/blog/prettier%20%E4%B8%8E%20eslint%20%E7%9A%84%E9%9B%86%E6%88%90#%E6%8E%A8%E8%8D%90%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="推荐配置的直接链接" title="推荐配置的直接链接">​</a></h3>
<!-- --><p>以上这种方式的集成配置较为繁琐，eslint-plugin-prettier 提供了一种简单的配置方式。</p>
<!-- --><p><strong>安装依赖</strong></p>
<!-- --><div class="language-bash codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-bash codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token plain">npm install -D --save-exact prettier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install -D eslint-plugin-prettier eslint-config-prettier</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p><strong>配置 .eslintrc.*</strong></p>
<!-- --><div class="language-js codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-js codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// .eslintrc.*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"extends"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"plugin:prettier/recommended"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>prettier</category>
            <category>eslint</category>
        </item>
        <item>
            <title><![CDATA[TS Equals]]></title>
            <link>https://huteming.github.io/blog/TS Equals</link>
            <guid>https://huteming.github.io/blog/TS Equals</guid>
            <pubDate>Tue, 23 Jan 2024 08:59:39 GMT</pubDate>
            <description><![CDATA[在做 ts 类型练习的时候，碰到需要比较两个类型是否相同，看到答案里有这么一种方法]]></description>
            <content:encoded><![CDATA[<p>在做 <!-- --><a href="https://typehero.dev/explore" target="_blank" rel="noopener noreferrer">ts 类型练习</a>的时候，碰到需要比较两个类型是否相同，看到答案里有这么一种方法<!-- --></p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Equals</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">X</span><span class="token class-name punctuation" style="color:#393A34">,</span><span class="token class-name"> </span><span class="token class-name constant" style="color:#36acaa">Y</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">X</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">Y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>这里的泛型 T 是什么意思？这段代码该怎么理解？</p>
<!-- --><p>搜索到比较好的答案在<!-- --><a href="https://stackoverflow.com/questions/68961864/how-does-the-equals-work-in-typescript" target="_blank" rel="noopener noreferrer">这里</a>，也顺便记录下自己看完后的理解<!-- --></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="泛型-t-是什么意思">泛型 T 是什么意思？<!-- --><a href="https://huteming.github.io/blog/TS%20Equals#%E6%B3%9B%E5%9E%8B-t-%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D" class="hash-link" aria-label="泛型 T 是什么意思？的直接链接" title="泛型 T 是什么意思？的直接链接">​</a></h2>
<!-- --><p><strong>没有意思</strong>！！这就是一个定义的泛型，只是我们平时用的比较多的是像这样<!-- --></p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Identity</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">T</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>区别只是上面这段代码在执行时会自动根据传入的 data 类型推断 T 的类型，而 Equal 中的写法需要手动传入，默认是 <!-- --><code>unknown</code>，没有任何特殊的含义<!-- --></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="怎么理解这段代码">怎么理解这段代码<!-- --><a href="https://huteming.github.io/blog/TS%20Equals#%E6%80%8E%E4%B9%88%E7%90%86%E8%A7%A3%E8%BF%99%E6%AE%B5%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="怎么理解这段代码的直接链接" title="怎么理解这段代码的直接链接">​</a></h2>
<!-- --><p>Equal 这段代码重点在于比较两个函数 <!-- --><code>(&lt;T&gt;() =&gt; T extends X ? 1 : 2)</code> 和 <!-- --><code>(&lt;T&gt;() =&gt; T extends Y ? 1 : 2)</code> 是否相同。<!-- --></p>
<!-- --><p>那么问题就变成 X 和 Y 是否相同。</p>
<!-- --><p>如果 X 和 Y 相同，没什么好说的， extends 一定成立；如果不同时，那么我们总能找到一种类型，使得用它作为 T 时，extends 不成立。代码如下</p>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">x</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">x</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">number</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">y</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> d </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">y</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name builtin">number</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> foo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> bar</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> foo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">x</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">{</span><span class="token generic-function generic class-name"> foo</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style="color:#393A34">}</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">y</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">{</span><span class="token generic-function generic class-name"> foo</span><span class="token generic-function generic class-name operator" style="color:#393A34">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style="color:#393A34">}</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>因此我们就可以用它来判断 X 和 Y 是否相同。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="特殊情况">特殊情况<!-- --><a href="https://huteming.github.io/blog/TS%20Equals#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5" class="hash-link" aria-label="特殊情况的直接链接" title="特殊情况的直接链接">​</a></h2>
<!-- --><p>以上只是解释了 Equal 的基本原理，ts 内部实现可能要复杂的多，可能有时候为了性能或者什么原因，会出现一些和常规认识不一样的结果</p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="nativeequal">NativeEqual<!-- --><a href="https://huteming.github.io/blog/TS%20Equals#nativeequal" class="hash-link" aria-label="NativeEqual的直接链接" title="NativeEqual的直接链接">​</a></h3>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">NaiveEquals</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">X</span><span class="token class-name punctuation" style="color:#393A34">,</span><span class="token class-name"> </span><span class="token class-name constant" style="color:#36acaa">Y</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">X</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">Y</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Y</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">X</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">A</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> NaiveEquals</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">B</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Equals</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> a</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// false</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>理论上 A 也应该是 false，因为类型 <!-- --><code>{a: string}</code> 可分配给 <!-- --> ，但不能分配给 <!-- --><code>{a?: number}</code></p>
<!-- --><h3 class="anchor anchorWithStickyNavbar_hX6q" id="联合类型">联合类型<!-- --><a href="https://huteming.github.io/blog/TS%20Equals#%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B" class="hash-link" aria-label="联合类型的直接链接" title="联合类型的直接链接">​</a></h3>
<!-- --><div class="language-ts codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-ts codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name constant" style="color:#36acaa">A</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Equals</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// false</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>理论上这里 A 应该是 true，但结果却是 false，了解不了，但是事实。</p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="总结">总结<!-- --><a href="https://huteming.github.io/blog/TS%20Equals#%E6%80%BB%E7%BB%93" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<!-- --><p>Equal 当作日常使用应该是没问题的，特殊情况我觉得完全可以当作补充知识去了解下。</p>
<!-- --><p>再次说明，原文在<!-- --><a href="https://stackoverflow.com/questions/68961864/how-does-the-equals-work-in-typescript" target="_blank" rel="noopener noreferrer">这里</a>。<!-- --></p>]]></content:encoded>
            <category>ts</category>
        </item>
        <item>
            <title><![CDATA[css实现文字交融]]></title>
            <link>https://huteming.github.io/blog/css实现文字交融</link>
            <guid>https://huteming.github.io/blog/css实现文字交融</guid>
            <pubDate>Tue, 23 Jan 2024 08:59:39 GMT</pubDate>
            <description><![CDATA[效果预览]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_hX6q" id="效果预览">效果预览<!-- --><a href="https://huteming.github.io/blog/css%E5%AE%9E%E7%8E%B0%E6%96%87%E5%AD%97%E4%BA%A4%E8%9E%8D#%E6%95%88%E6%9E%9C%E9%A2%84%E8%A7%88" class="hash-link" aria-label="效果预览的直接链接" title="效果预览的直接链接">​</a></h2>
<!-- --><p><a href="https://36sqt4.csb.app/" target="_blank" rel="noopener noreferrer">在线查看</a></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="知识点">知识点<!-- --><a href="https://huteming.github.io/blog/css%E5%AE%9E%E7%8E%B0%E6%96%87%E5%AD%97%E4%BA%A4%E8%9E%8D#%E7%9F%A5%E8%AF%86%E7%82%B9" class="hash-link" aria-label="知识点的直接链接" title="知识点的直接链接">​</a></h2>
<!-- --><p><a href="https://juejin.cn/post/7245316146336563261" target="_blank" rel="noopener noreferrer">文章链接</a></p>]]></content:encoded>
            <category>css</category>
        </item>
        <item>
            <title><![CDATA[浏览器原生支持 ES6 模块]]></title>
            <link>https://huteming.github.io/blog/浏览器原生支持 ES6 模块</link>
            <guid>https://huteming.github.io/blog/浏览器原生支持 ES6 模块</guid>
            <pubDate>Tue, 23 Jan 2024 08:59:39 GMT</pubDate>
            <description><![CDATA[MDN 详细介绍]]></description>
            <content:encoded><![CDATA[<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank" rel="noopener noreferrer">MDN 详细介绍</a></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="不能使用裸露的模块说明符">不能使用裸露的模块说明符<!-- --><a href="https://huteming.github.io/blog/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%94%9F%E6%94%AF%E6%8C%81%20ES6%20%E6%A8%A1%E5%9D%97#%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E8%A3%B8%E9%9C%B2%E7%9A%84%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E%E7%AC%A6" class="hash-link" aria-label="不能使用裸露的模块说明符的直接链接" title="不能使用裸露的模块说明符的直接链接">​</a></h2>
<!-- --><div class="language-js codeBlockContainer_Y9Cs theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VidV"><pre tabindex="0" class="prism-code language-js codeBlock_t113 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_i0ct"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bad: 这样是错误的写法，不支持的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> name </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> squareNameOne </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'shapes'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> name </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> squareNameTwo </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'shapes/square'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Good: 应该这样子</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> name </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> squareName</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> draw </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./shapes/square.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> name </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> squareName</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> draw </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/shapes/square.js'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> name </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> circleName </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://example.com/shapes/circle.js'</span><br></span></code></pre><div class="buttonGroup_LZxu"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_IklN" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_zQrJ"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_JhWk"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- --><p>默认情况下不支持，但是可以通过定义 <!-- --><strong>导入映射</strong> 来实现。<!-- --><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#importing_modules_using_import_maps" target="_blank" rel="noopener noreferrer">查看详细文档</a></p>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="总是-cors-跨域">总是 CORS 跨域<!-- --><a href="https://huteming.github.io/blog/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%94%9F%E6%94%AF%E6%8C%81%20ES6%20%E6%A8%A1%E5%9D%97#%E6%80%BB%E6%98%AF-cors-%E8%B7%A8%E5%9F%9F" class="hash-link" aria-label="总是 CORS 跨域的直接链接" title="总是 CORS 跨域的直接链接">​</a></h2>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="默认-defer-行为">默认 Defer 行为<!-- --><a href="https://huteming.github.io/blog/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%94%9F%E6%94%AF%E6%8C%81%20ES6%20%E6%A8%A1%E5%9D%97#%E9%BB%98%E8%AE%A4-defer-%E8%A1%8C%E4%B8%BA" class="hash-link" aria-label="默认 Defer 行为的直接链接" title="默认 Defer 行为的直接链接">​</a></h2>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="模块只会执行一次">模块只会执行一次<!-- --><a href="https://huteming.github.io/blog/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%94%9F%E6%94%AF%E6%8C%81%20ES6%20%E6%A8%A1%E5%9D%97#%E6%A8%A1%E5%9D%97%E5%8F%AA%E4%BC%9A%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1" class="hash-link" aria-label="模块只会执行一次的直接链接" title="模块只会执行一次的直接链接">​</a></h2>
<!-- --><h2 class="anchor anchorWithStickyNavbar_hX6q" id="限定作用域">限定作用域<!-- --><a href="https://huteming.github.io/blog/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%94%9F%E6%94%AF%E6%8C%81%20ES6%20%E6%A8%A1%E5%9D%97#%E9%99%90%E5%AE%9A%E4%BD%9C%E7%94%A8%E5%9F%9F" class="hash-link" aria-label="限定作用域的直接链接" title="限定作用域的直接链接">​</a></h2>
<!-- --><p>模块功能被导入到单个脚本的范围内, <!-- --><strong>它们在全局范围内不可用</strong>。<!-- --></p>
<!-- --><p>因此，您只能在导入的脚本中访问导入的功能，而无法从 JavaScript 控制台访问它们。</p>]]></content:encoded>
            <category>html</category>
        </item>
    </channel>
</rss>
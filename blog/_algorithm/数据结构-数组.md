---
title: 数据结构-数组
summary: 线性数据结构之数组
date: 2020-05-08
tags:
  - 数据结构
---

## 描述

什么是数组？

是有限个相同类型的变量所组成的有序集合，数组中的每一个变量被称为元素。

数组是最为简单、最为常用的数据结构。

## 特点

1. 数组中的每一个元素也有着自己的下标，只不过这个下标从0开始，一直到数组长度-1。

2. 数组的另一个特点，是在内存中顺序存储，因此可以很好地实现逻辑上的顺序表。

::: tip 内存
内存是由一个个连续的内存单元组成的，每一个内存单元都有自己的地址。在这些内存单元中，有些被其他数据占用了，有些是空闲的。

数组中的每一个元素，都存储在小小的内存单元中，并且元素之间紧密排列，既不能打乱元素的存储顺序，也不能跳过某个存储单元进行存储。
:::

## 基本操作

### 读取元素

据下标读取元素（也叫随机读取）

### 更换元素

直接利用数组下标，就可以把新值赋给该元素。

### 插入元素

- 尾部插入

尾部插入，是最简单的情况，直接把插入的元素放在数组尾部的空闲位置即可，等同于更新元素的操作。

- 中间插入

中间插入，稍微复杂一些。由于数组的每一个元素都有其固定下标，所以不得不首先把插入位置及后面的元素向后移动，腾出地方，再把要插入的元素放到对应的数组位置上。

- 超范围插入

这就涉及数组的扩容了。此时可以创建一个新数组，长度是旧数组的2倍，再把旧数组中的元素统统复制过去，这样就实现了数组的扩容。

### 删除元素

数组的删除操作和插入操作的过程相反，如果删除的元素位于数组中间，其后的元素都需要向前挪动1位。这里不涉及到扩容问题。

## js代码实现

```js
class MyArray {
  constructor (length = 0) {
    this.data = new Array(length)
    this.size = 0
  }

  /**
   * 数组插入元素
   * @param {*number} index 插入位置
   * @param {*any} node 插入元素
   */
  insert (index, node) {
    if (this.size >= this.data.length) {
      this.resize()
    }
    // 从右向左遍历赋值
    for (let i = this.size - 1; i >= index; i--) {
      this.data[i + 1] = this.data[i]
    }
    this.data[index] = node
    this.size++

    return node
  }

  /**
   * 数组删除元素
   * @param {*number} index 删除位置下标
   */
  destroy (index) {
    const destroied = this.data[index]
    for (let i = index; i < this.size - 1; i++) {
      this.data[i] = this.data[i + 1]
    }
    // 可以选择不删除最后一位
    // 如果不删除，则需要在其他方法中判断不打印输出size以外的值
    delete this.data[this.size - 1]
    this.size--

    return destroied
  }

  /**
   * 数组更新元素
   * @param {*number} index 更新元素位置
   * @param {*any} node 更新元素
   */
  update (index, node) {
    this.data[index] = node

    return node
  }

  /**
   * 数组查找
   * @param {*number} index 查找位置下标
   */
  find (index) {
    return this.data[index]
  }

  /**
   * 数组扩容
   */
  resize () {
    const arr = new Array(this.data.length * 2)
    for (let i = 0; i < this.size; i++) {
      arr[i] = this.data[i]
    }
    this.data = arr
  }

  /**
   * 打印
   */
  output () {
    console.log(this.data)
  }
}
```

## 优势 & 劣势

### 优势

数组拥有非常高效的随机访问能力，只要给出下标，就可以用常量时间找到对应元素。

有一种高效查找元素的算法叫作二分查找，就是利用了数组的这个优势。

### 劣势

数组劣势体现在插入和删除元素方面。由于数组元素连续紧密地存储在内存中，插入、删除元素都会导致大量元素被迫移动，影响效率。

## 总结

总的来说，数组所适合的是读操作多、写操作少的场景。
